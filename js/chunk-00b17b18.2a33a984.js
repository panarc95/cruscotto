(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00b17b18"],{1560:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("h3",[t._v("Fatture senza esito")]),t._m(0),e("button",{staticClass:"btn btn-text float-right",on:{click:function(a){return t.getCompanies()}}},[t._v("\n    Aggiorna\n    "),e("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),e("table",{staticClass:"table table-sm table-striped"},[t._m(1),e("tbody",t._l(t.companies,(function(a){return e("tr",{key:a.IDAzienda,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.getInvoices(a)}}},[e("td",{attrs:{scope:"row"}},[t._v(t._s(a.IDAzienda))]),e("td",{attrs:{scope:"row"}},[t._v(t._s(a.RagioneSociale))]),e("td",[t._v(t._s(a.Conteggio))])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"modelId",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"95% !important"},attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.selectedCompany))]),t._m(2)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"container-fluid"},[t._m(3),e("table",{staticClass:"table table-sm table-striped"},[t._m(4),e("tbody",t._l(t.invoices,(function(a){return e("tr",{key:a.ID},[e("td",{attrs:{scope:"row"}},[e("a",{staticClass:"btn btn-default btn-sm",attrs:{title:"Scarica fattura direttamente dall'FI",href:"#",role:"button"},on:{click:function(e){return e.preventDefault(),t.downloadInvoice(a.Nome_File,a.FI)}}},[e("i",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}})]),e("a",{staticClass:"btn btn-default btn-sm",attrs:{title:"Cerca esiti negli FO ricevuti",href:"#",role:"button"},on:{click:function(e){return e.preventDefault(),t.getRealEsito(a.Nome_File,a.ID)}}},[e("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])]),e("td",[t._v("\n                    "+t._s(a.Nome_File)+"\n                    "),e("div",{staticClass:"collapse",attrs:{id:"esito-"+a.ID}},[void 0==t.esiti[a.ID]?e("span",[t._v("Ricerca notifiche in corso...")]):e("span",[0==t.esiti[a.ID].length?e("span",[t._v("Nessun risultato")]):e("span",t._l(t.esiti[a.ID],(function(a){return e("p",{key:a.ID},[e("b",[t._v("Trovata notifica di tipo "+t._s(a.type))]),e("br"),t._v("\n                            "+t._s(a.datetime)+"\n                            "),e("br"),t._v("\n                            "+t._s(a.filename)+"\n                            "),e("br"),e("a",{staticClass:"btn btn-default btn-secondary",staticStyle:{"margin-right":".5rem"},attrs:{title:"Rimappa FO",href:"#"},on:{click:function(e){return e.preventDefault(),t.launchRemap(a.fo)}}},[e("i",{staticClass:"fa fa-upload",attrs:{"aria-hidden":"true"}})]),e("a",{staticClass:"btn btn-default btn-secondary",attrs:{title:"Rimappa file",href:"#"},on:{click:function(e){return e.preventDefault(),t.launchRemap(a.fo,a.filename)}}},[e("i",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}})]),t._v("\n                            "+t._s(a.fo)+"\n                          ")])})),0)])])]),e("td",[t._v(t._s(a.NumeroFattura))]),e("td",[t._v(t._s(a.DataFattura))]),e("td",[t._v(t._s(a.RagSocDest))]),e("td",[t._v(t._s(a.Invio))]),e("td",[t._v(t._s(a.FI))])])})),0)])])]),t._m(5)])])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",[t._v("\n    Di seguito sono raccolte le aziende che hanno fatture inviate da 2 o più giorni che ancora non hanno una notifica associata.\n    "),e("br"),t._v('Cliccando su una riga sarà possibile vedere i dettagli delle fatture conteggiate come "Senza esito".\n  ')])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{},[e("tr",[e("th",[t._v("IDAzienda")]),e("th",[t._v("Azienda")]),e("th",[t._v("Fatture senza esito")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"alert alert-warning"},[e("b",[t._v("Attenzione: non ricaricare la pagina se si lancia la mappatura degli esiti per una fattura con più esiti.")]),e("br"),t._v("Questa tabella elenca esclusivamente le fatture senza esito.\n              "),e("br"),t._v("Una volta cominciata la mappatura di un FO relativo ad uno degli esiti di una fattura occorre finire la mappatura degli FO per tutti gli esiti prima di poter ricaricare la pagina (o, semplicemente, segnarsi il nome della fattura ed utilizzare lo strumento\n              "),e("a",{attrs:{target:"_blank",href:"https://archicons.archivium-srl.it/ArchiHub/procedures/varie/searchFOnew/#/search"}},[t._v("Ricerca SdI")]),t._v(")\n            ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th"),e("th",[t._v("Nome File")]),e("th",[t._v("Numero Fattura")]),e("th",[t._v("Data Fattura")]),e("th",[t._v("Destinatario")]),e("th",[t._v("Data invio")]),e("th",[t._v("FI")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Chiudi")])])}],s=(e("ac6a"),e("1157")),r=e.n(s),o={data:function(){return{companies:new Array,invoices:new Array,esiti:[],selectedCompany:null,loading:!1}},mounted:function(){this.getCompanies()},methods:{getCompanies:function(){var t=this;this.$store.dispatch("loading"),this.axios.get(this.apiURL+"/fe/no-esito").then((function(a){t.companies=a.data})).catch((function(){})).finally((function(){t.$store.dispatch("loaded")}))},getInvoices:function(t){var a=this,e=t.IDAzienda;this.selectedCompany=t.RagioneSociale,this.$store.dispatch("loading"),this.axios.get(this.apiURL+"/fe/no-esito/company/"+e).then((function(t){a.invoices=t.data,a.invoices.forEach((function(t){a.esiti[t.ID]=t.Notifiche})),a.$store.dispatch("loaded"),r()("#modelId").modal("show")})).catch((function(){a.$store.dispatch("loaded")}))},downloadInvoice:function(t,a){var e="https://archicons.archivium-srl.it/ArchiHub/procedures/varie/searchFOnew/api.php/out/download/file/"+t+"/"+a,i=window.open(e,"_blank");i.focus()},launchRemap:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e="https://archicons.archivium-srl.it/ArchiHub/procedures/FE/FOMapper.php?nolock&file="+t;a&&(e+="&nomefile="+a);window.open(e,"FOMapper","width=800, height=800")},getRealEsito:function(t,a){var e=this;r()("#esito-"+a).collapse("toggle"),void 0==this.esiti[a]&&this.axios.get(this.apiURL+"/fe/no-esito/search-esito/"+t).then((function(t){e.$set(e.esiti,a,t.data)}))}}},l=o,c=e("2877"),d=Object(c["a"])(l,i,n,!1,null,null,null);a["default"]=d.exports},ac6a:function(t,a,e){for(var i=e("cadf"),n=e("0d58"),s=e("2aba"),r=e("7726"),o=e("32e9"),l=e("84f2"),c=e("2b4c"),d=c("iterator"),u=c("toStringTag"),f=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(h),v=0;v<p.length;v++){var m,_=p[v],b=h[_],g=r[_],C=g&&g.prototype;if(C&&(C[d]||o(C,d,f),C[u]||o(C,u,_),l[_]=f,b))for(m in i)C[m]||s(C,m,i[m],!0)}}}]);
//# sourceMappingURL=chunk-00b17b18.2a33a984.js.map